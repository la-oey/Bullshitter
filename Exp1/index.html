<!--
TODO:
1. get images of products
2. make product list correct
3. randomize product list
4. make the actual content of the experiment not filler.
5. make it less ugly.
 -->

<!DOCTYPE html>
<html>
<html lang="en-US">
<meta charset="UTF-8">
<head>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/javascript" src='js/client.js'></script>
    <script type="text/javascript" src='js/dataio.js'></script>
    <script type="text/javascript" src='js/script.js'></script>


</head>


<body onload="pageLoad();">

<div id="consent" class="screen">
    <h1 class="mtitle">University of California, San Diego<br>
        Consent to act as a research subject</h1>
    <p> Edward Vul, Ph.D. and his awesome students are conducting a research study to find out more about decision
        making.
        You have been asked to participate because you are an undergraduate here at UCSD. <br><br>
        <b>PROCEDURES.</b> If you agree to participate in this study, the following will happen to you:<br></p>
    <p style="margin-left: 150px; margin-right: 150px">
        1. You will sit at the computer and play a game.<br>
        2. Try to get the highest score you can.<br><br>
    </p>
    <p>
        <b>RISKS</b>. No potential risks or discomforts are anticipated except for the possibility that some tasks may
        be slightly boring.<br><br>
        <b>PAYMENT/REMUNERATION</b>. In consideration of your time and inconvenience, you will receive 1 hour of course
        credit. The procedures and length of participation will last approximately one hour.<br><br>
        <b>RIGHTS.</b> You may call the UCSD Human Research Protection Program at 858-657-5100 to ask about your rights
        as a research subject or to report research-related problems.<br><br>
        <b>BENEFITS</b>. There will be no direct benefit to you from these procedures. However, the investigator may
        learn more about basic questions pertaining to memory, perception, cognition, and learning. This knowledge may
        have benefits to society in fields ranging from education to design of airplane cockpits, but these benefits
        will be indirect.<br><br>
        <b>EXPLANATION.</b> The researcher has explained this study to you and answered your questions. If you have
        questions or research related problems, you may reach Edward Vul at 858-534-4401.<br><br>
        <b>VOLUNTARY NATURE OF PARTICIPATION.</b> Participation in research is entirely voluntary. You may refuse to
        participate or withdraw at any time without penalty.<br><br>
        <b>CONFIDENTIALITY.</b> Research records will be kept confidential to the extent allowed by law. As with all
        research, there is also the possibility of loss of confidentiality. Information from participants will be
        identified by a study number. The database which relates the study number to a specific subject will be
        maintained in the study coordinators office.<br><br>
        <b>COPY OF CONSENT.</b> You have received a copy of this consent document to keep and a copy of the Experimental
        Bill of Rights.
    </p>


    <button class="big-button" onclick="clickConsent();"> Click here to consent and agree to participate</button>
</div>

<div id="instructions" class="screen">
    <p class="mtitle">
        Instructions for the game. Please read carefully.
    </p>
    <div>
    	<p>You and your opponent are racing to be the first to get to <b id="instructGoalScore"></b> points. <br><br>
    	You will take turns drawing <b id="instructMarblesSampled"></b> marbles from the box and responding. <b>Each red marble is 1 point for the marble-drawer and each blue marble is 1 point for the responder.</b> Only the marble-drawer sees how many marbles were drawn. The marble-drawer reports how many <b>red</b> marbles they <i>want the responder opponent to think</i> they drew.</p>
    	<p class="indent">E.g. 6 red marbles = marble-drawer: 6 pts; responder: 4pts.</p>
    	<p><b>Critically, the marble-drawer doesn't necessarily need to tell the truth ;).</b> However, the responder can call out the marble-drawer as lying by rejecting how many marbles they claimed they drew. If the marble-drawer is called out as lying and they were telling the truth, they get the number of points for how many red marbles they claimed they drew and the responder gets the <b>negative of those points</b>.</p>
    	<p class="indent">E.g. Marble-drawer was telling the truth: 6 red marbles = marble-drawer: 6 pts; responder: -6 pts</p>
    	<p>Vice versa, if the marble-drawer was in fact lying, the responder gets the points for the red marbles, and the marble-drawer get the <b>negative of those points</b>.</p>
    	<p class="indent">E.g. Marble-drawer was lying: 6 red marbles = marble-drawer: -6 pts; responder: 6 pts</p>
    	<p>This is what a round looks like:</p>
    </div>
    <center><img src="img/instructTrial.png"></center><br>
    <button class="big-button" id="continueLead" onclick="clickInstructions();">Click here to continue</button>
</div>


<div id="trial" class="screen">
    <p class="mtitle trialNum">Round</p>
    <center><div id="trialInstruct"></div><br></center>
    <div id="wrapper">
        <div id="urn">
            <svg id="urnsvg"></svg>
        </div>
        <div id="tube">
            <svg id="tubesvg"></svg>
            <button id="draw-button" type="button" onclick="draw();">Draw Marble</button>
        </div>
    </div>

    <center><br><br>
        <div id="subjResponse"></div>
        <div id="buttonResponse">
        	<button class="callout-button" id="accept-button" type="button" onclick="callout('accept');"><b>Accept</b></button>
        	<button class="callout-button" id="reject-button" type="button" onclick="callout('reject');"><b>Reject</b></button>
        </div>
    </center>
    <br><br><br>
    <button class="big-button" id="next" type="button" onclick="toScoreboard();">Next!</button>
</div>

<div id="scoreboard" class="screen">
	<p class="mtitle trialNum">Round</p><br>
	<p class="scoreReport" id="calledBS"></p>
	<p class="scoreReport" id="pointsRewarded">You get <b id="playerPts"></b> points and your opponent gets <b id="oppPts"></b> points.</p><br><br><br>
	<center><h2>Scoreboard</h2></center>
	<div id="scoreboardDiv">
	    <div class="scoreCol">Your Score:<br><b id="playerScore">0</b></div>
	    <div class="scoreCol">Opponent's Score:<br><b id="oppScore">0</b></div>
 	</div>
	<br><br><br><br><br>
    <button class="big-button" id="nextScoreboard" type="button" onclick="trialDone();">Next!</button>
</div>


<div id="completed" class="screen">
    <p class="mtitle" id="whowon"></p>
    <p class="mtitle">Thank you for your participation!</p>
    <button class="big-button" id="finished" onclick="experimentDone();">Finished!</button>
</div>

</body>
